{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/felix/Felix/Hack/hack/screens/auth/Login.js\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState, useRef } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Picker from \"react-native-web/dist/exports/Picker\";\nimport { Title, Subheading } from 'react-native-paper';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport * as authActions from \"../../store/actions/auth\";\nimport { TextInput, Button, HelperText } from 'react-native-paper';\nimport { Formik } from \"formik\";\nimport countries from \"../../data/countries\";\nimport ConfirmDialog from \"../../components/utils/ConfirmDialog\";\nimport * as messageActions from \"../../store/actions/messages\";\n\nvar Login = function Login(props) {\n  var isAuth = useSelector(function (state) {\n    return state.auth.isAuthenticated;\n  });\n  var dispatch = useDispatch();\n\n  var _useState = useState(countries),\n      _useState2 = _slicedToArray(_useState, 2),\n      countryList = _useState2[0],\n      setCountryList = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      visible = _useState4[0],\n      setVisible = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      formFinalValues = _useState6[0],\n      setFormFinalValues = _useState6[1];\n\n  var ref = useRef();\n  var initialValues = {\n    phone: \"\",\n    countryCode: \"+234\"\n  };\n\n  var validate = function validate(values, prop) {\n    var errors = {};\n\n    if (!values.countryCode) {\n      errors.countryCode = \"Country code is required\";\n    } else if (!/^(\\+?\\d{1,4}|\\d{1,5})$/.test(values.countryCode)) {\n      errors.countryCode = \"Invalid Country Code\";\n    }\n\n    var numberRegex = !/^\\+(?:[0-9] ?){6,14}[0-9]$/;\n\n    if (!values.phone) {\n      errors.phone = \"Phone Number is required!\";\n    } else if (!numberRegex.test(values.phone)) {\n      errors.phone = \"Invalid Phone Number\";\n    }\n\n    return errors;\n  };\n\n  var onSubmitHandler = function onSubmitHandler(values) {\n    setVisible(true);\n    setFormFinalValues(values);\n  };\n\n  var executionFunction = function executionFunction() {\n    return _regeneratorRuntime.async(function executionFunction$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(dispatch(authActions.authenticate(formFinalValues.countryCode + formFinalValues.phone, \"sms\")));\n\n          case 3:\n            props.navigation.navigate(\"Verify\");\n            _context.next = 10;\n            break;\n\n          case 6:\n            _context.prev = 6;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n            dispatch(messageActions.setMessage(_context.t0.message, \"error\"));\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 6]], Promise);\n  };\n\n  return React.createElement(ScrollView, {\n    style: {\n      flex: 1\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 4\n    }\n  }, React.createElement(KeyboardAvoidingView, {\n    behavior: Platform.OS === 'ios' ? \"height\" : \"padding\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.center,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 6\n    }\n  }, React.createElement(Title, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, \"Enter your phone number\")), React.createElement(View, {\n    style: styles.sub,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 6\n    }\n  }, React.createElement(Subheading, {\n    style: {\n      textAlign: \"center\",\n      lineHeight: 17\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, \"Hack will send an SMS to verify your phone number\")), React.createElement(Formik, {\n    initialValues: initialValues,\n    onSubmit: function onSubmit(values) {\n      onSubmitHandler(values);\n    },\n    validate: validate,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 6\n    }\n  }, function (_ref) {\n    var handleChange = _ref.handleChange,\n        handleBlur = _ref.handleBlur,\n        handleSubmit = _ref.handleSubmit,\n        values = _ref.values,\n        errors = _ref.errors,\n        touched = _ref.touched;\n    return React.createElement(View, {\n      style: {\n        marginVertical: \"5%\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 8\n      }\n    }, React.createElement(View, {\n      style: styles.form1,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }\n    }, React.createElement(HelperText, {\n      type: \"info\",\n      visible: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 10\n      }\n    }, \"Select Country\"), React.createElement(Picker, {\n      selectedValue: values.countryCode,\n      onValueChange: handleChange('countryCode'),\n      style: styles.picker,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 10\n      }\n    }, countryList.map(function (item, index) {\n      return React.createElement(Picker.Item, {\n        label: item.name,\n        value: item.dialCode,\n        key: index,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 45\n        }\n      });\n    }))), React.createElement(View, {\n      style: styles.form2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }\n    }, React.createElement(View, {\n      style: styles.code,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 10\n      }\n    }, React.createElement(TextInput, {\n      mode: \"flat\",\n      label: \"Code\",\n      value: values.countryCode,\n      onChangeText: handleChange('countryCode'),\n      onBlur: handleBlur('countryCode'),\n      keyboardType: \"number-pad\",\n      style: styles.input,\n      error: errors.countryCode ? true : false,\n      returnKeyType: \"next\",\n      onEndEditing: function onEndEditing() {\n        ref.current.focus();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }\n    }), React.createElement(HelperText, {\n      type: \"error\",\n      visible: errors.countryCode ? true : false,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }\n    }, errors.countryCode)), React.createElement(View, {\n      style: styles.phone,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 10\n      }\n    }, React.createElement(TextInput, {\n      mode: \"flat\",\n      label: \"Phone Number\",\n      autoCompleteType: \"tel\",\n      onBlur: handleBlur('phone'),\n      onChangeText: handleChange('phone'),\n      keyboardType: \"number-pad\",\n      style: styles.input,\n      error: errors.phone && touched.phone ? true : false,\n      ref: ref,\n      onEndEditing: handleSubmit,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }\n    }), React.createElement(HelperText, {\n      type: \"error\",\n      visible: errors.phone && touched.phone ? true : false,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }\n    }, errors.phone))), React.createElement(View, {\n      style: styles.form3,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }\n    }, React.createElement(Button, {\n      mode: \"contained\",\n      disabled: errors.phone || errors.countryCode ? true : false,\n      style: \"btn\",\n      onPress: handleSubmit,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 10\n      }\n    }, \"Next\")));\n  }), React.createElement(ConfirmDialog, {\n    okText: \"OK\",\n    cancelText: \"CANCEL\",\n    visible: visible,\n    hideDialog: function hideDialog() {\n      return setVisible(false);\n    },\n    executionFunction: executionFunction,\n    title: \"Confirm\",\n    content: \"By cliking OK, Hack will send a verification message to \" + (formFinalValues.countryCode + formFinalValues.phone) + \". Click CANCEL to change number. Continue?\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 6\n    }\n  })));\n};\n\nvar styles = StyleSheet.create({\n  center: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginTop: \"10%\"\n  },\n  sub: {\n    flex: 1,\n    textAlign: \"center\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginTop: \"5%\",\n    flexDirection: \"column\"\n  },\n  input: {\n    backgroundColor: \"transparent\"\n  },\n  form1: {\n    marginTop: \"5%\",\n    width: \"100%\",\n    borderBottomWidth: 2,\n    borderBottomColor: \"#ccc\"\n  },\n  form2: {\n    marginTop: \"5%\",\n    flexDirection: \"row\",\n    width: \"100%\",\n    justifyContent: \"space-between\"\n  },\n  picker: {\n    height: 50,\n    width: \"100%\"\n  },\n  code: {\n    width: \"30%\"\n  },\n  phone: {\n    width: \"65%\"\n  },\n  dropdown: {\n    width: \"100%\"\n  },\n  form3: {\n    alignItems: \"center\"\n  }\n});\nexport default Login;","map":{"version":3,"sources":["/home/felix/Felix/Hack/hack/screens/auth/Login.js"],"names":["React","useEffect","useState","useRef","Title","Subheading","useDispatch","useSelector","authActions","TextInput","Button","HelperText","Formik","countries","ConfirmDialog","messageActions","Login","props","isAuth","state","auth","isAuthenticated","dispatch","countryList","setCountryList","visible","setVisible","formFinalValues","setFormFinalValues","ref","initialValues","phone","countryCode","validate","values","prop","errors","test","numberRegex","onSubmitHandler","executionFunction","authenticate","navigation","navigate","console","log","setMessage","message","flex","Platform","OS","styles","center","sub","textAlign","lineHeight","handleChange","handleBlur","handleSubmit","touched","marginVertical","form1","picker","map","item","index","name","dialCode","form2","code","input","current","focus","form3","StyleSheet","create","justifyContent","alignItems","marginTop","flexDirection","backgroundColor","width","borderBottomWidth","borderBottomColor","height","dropdown"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { View, Text, FlatList, StyleSheet, ScrollView, SafeAreaView, KeyboardAvoidingView, Platform, Picker } from \"react-native\";\nimport { Title, Subheading } from 'react-native-paper'\nimport { useDispatch, useSelector } from \"react-redux\"\nimport * as authActions from \"../../store/actions/auth\"\n// import DropDown from \"react-native-paper-dropdown\";\nimport { TextInput, Button, HelperText } from 'react-native-paper';\nimport { Formik } from \"formik\"\nimport countries from \"../../data/countries\";\nimport ConfirmDialog from \"../../components/utils/ConfirmDialog\";\nimport * as messageActions from '../../store/actions/messages';\n\nconst Login = (props) => {\n\tconst isAuth = useSelector(state => state.auth.isAuthenticated);\n\tconst dispatch = useDispatch();\n\tconst [countryList, setCountryList] = useState(countries)\n\tconst [visible, setVisible] = useState(false)\n\tconst [formFinalValues, setFormFinalValues] = useState({})\n\tconst ref = useRef()\n\n\tconst initialValues = {\n\t\tphone: \"\",\n\t\tcountryCode: \"+234\"\n\t}\n\tconst validate = (values, prop) => {\n\t\tconst errors = {};\n\t\tif (!values.countryCode) {\n\t\t\terrors.countryCode = \"Country code is required\"\n\t\t} else if (!/^(\\+?\\d{1,4}|\\d{1,5})$/.test(values.countryCode)) {\n\t\t\terrors.countryCode = \"Invalid Country Code\"\n\t\t}\n\t\tconst numberRegex = !/^\\+(?:[0-9] ?){6,14}[0-9]$/\n\t\tif (!values.phone) {\n\t\t\terrors.phone = \"Phone Number is required!\"\n\t\t} else if (!numberRegex.test(values.phone)) {\n\t\t\terrors.phone = \"Invalid Phone Number\"\n\t\t}\n\t\treturn errors\n\t}\n\tconst onSubmitHandler = (values) => {\n\t\tsetVisible(true)\n\t\tsetFormFinalValues(values)\n\t}\n\tconst executionFunction = async() => {\n\t\t// console.log(formFinalValues)\n\t\ttry {\n\t\t\tawait dispatch(authActions.authenticate(formFinalValues.countryCode+formFinalValues.phone, \"sms\"))\n\t\t\tprops.navigation.navigate(\"Verify\")\n\t\t}catch(error){\n\t\t\tconsole.log(error)\n\t\t\t\tdispatch(messageActions.setMessage(error.message, \"error\"))\n\t\t}\n\t}\n\treturn (\n\t\t// <SafeAreaView >\n\t\t\t<ScrollView style={{ flex: 1 }}>\n\t\t\t\t<KeyboardAvoidingView behavior={Platform.OS === 'ios' ? \"height\" : \"padding\"}>\n\t\t\t\t\t<View style={styles.center}>\n\t\t\t\t\t\t<Title>Enter your phone number</Title>\n\t\t\t\t\t</View>\n\t\t\t\t\t<View style={styles.sub}>\n\t\t\t\t\t\t<Subheading style={{ textAlign: \"center\", lineHeight: 17 }}>Hack will send an SMS to verify your phone number</Subheading>\n\t\t\t\t\t</View>\n\t\t\t\t\t<Formik\n\t\t\t\t\t\tinitialValues={initialValues}\n\t\t\t\t\t\tonSubmit={values => { onSubmitHandler(values) }}\n\t\t\t\t\t\tvalidate={validate}\n\t\t\t\t\t>\n\t\t\t\t\t\t{({ handleChange, handleBlur, handleSubmit, values, errors, touched }) => (\n\t\t\t\t\t\t\t<View style={{ marginVertical: \"5%\" }}>\n\t\t\t\t\t\t\t\t<View style={styles.form1}>\n\t\t\t\t\t\t\t\t\t<HelperText type=\"info\" visible={true}>\n\t\t\t\t\t\t\t\t\t\tSelect Country\n\t\t\t\t\t\t\t\t\t</HelperText>\n\t\t\t\t\t\t\t\t\t<Picker selectedValue={values.countryCode} onValueChange={handleChange('countryCode')} style={styles.picker}>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tcountryList.map((item, index) => <Picker.Item label={item.name} value={item.dialCode} key={index} />)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</Picker>\n\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t<View style={styles.form2}>\n\t\t\t\t\t\t\t\t\t<View style={styles.code}>\n\t\t\t\t\t\t\t\t\t\t<TextInput mode=\"flat\"\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Code\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={values.countryCode}\n\t\t\t\t\t\t\t\t\t\t\tonChangeText={handleChange('countryCode')}\n\t\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur('countryCode')}\n\t\t\t\t\t\t\t\t\t\t\tkeyboardType=\"number-pad\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={styles.input}\n\t\t\t\t\t\t\t\t\t\t\terror={errors.countryCode ? true : false}\n\t\t\t\t\t\t\t\t\t\t\treturnKeyType=\"next\"\n\t\t\t\t\t\t\t\t\t\t\tonEndEditing={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tref.current.focus()\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<HelperText type=\"error\" visible={errors.countryCode ? true : false}>\n\t\t\t\t\t\t\t\t\t\t\t{errors.countryCode}\n\t\t\t\t\t\t\t\t\t\t</HelperText>\n\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t<View style={styles.phone}>\n\t\t\t\t\t\t\t\t\t\t<TextInput mode=\"flat\"\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Phone Number\"\n\t\t\t\t\t\t\t\t\t\t\tautoCompleteType=\"tel\"\n\t\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur('phone')}\n\t\t\t\t\t\t\t\t\t\t\tonChangeText={handleChange('phone')}\n\t\t\t\t\t\t\t\t\t\t\tkeyboardType=\"number-pad\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={styles.input}\n\t\t\t\t\t\t\t\t\t\t\terror={errors.phone && touched.phone ? true : false}\n\t\t\t\t\t\t\t\t\t\t\tref={ref}\n\t\t\t\t\t\t\t\t\t\t\tonEndEditing={handleSubmit}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<HelperText type=\"error\" visible={errors.phone && touched.phone ? true : false}>\n\t\t\t\t\t\t\t\t\t\t\t{errors.phone}\n\t\t\t\t\t\t\t\t\t\t</HelperText>\n\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t<View style={styles.form3}>\n\t\t\t\t\t\t\t\t\t<Button mode=\"contained\" disabled={errors.phone || errors.countryCode ? true : false} style={\"btn\"} onPress={handleSubmit}>Next</Button>\n\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Formik>\n\t\t\t\t\t<ConfirmDialog\n\t\t\t\t\t\tokText=\"OK\"\n\t\t\t\t\t\tcancelText=\"CANCEL\"\n\t\t\t\t\t\tvisible={visible}\n\t\t\t\t\t\thideDialog={() => setVisible(false)}\n\t\t\t\t\t\texecutionFunction={executionFunction}\n\t\t\t\t\t\ttitle={\"Confirm\"}\n\t\t\t\t\t\tcontent={`By cliking OK, Hack will send a verification message to ${formFinalValues.countryCode + formFinalValues.phone}. Click CANCEL to change number. Continue?`}\n\t\t\t\t\t/>\n\t\t\t\t</KeyboardAvoidingView>\n\t\t\t</ScrollView>\n\t\t// </SafeAreaView>\n\t)\n}\nconst styles = StyleSheet.create({\n\tcenter: {\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\tmarginTop: \"10%\"\n\t},\n\tsub: {\n\t\tflex: 1,\n\t\ttextAlign: \"center\",\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\tmarginTop: \"5%\",\n\t\tflexDirection: \"column\"\n\t},\n\tinput: {\n\t\tbackgroundColor: \"transparent\"\n\t},\n\tform1: {\n\t\t// flex: 1,\n\t\tmarginTop: \"5%\",\n\t\twidth: \"100%\",\n\t\t// justifyContent: \"center\",\n\t\tborderBottomWidth: 2,\n\t\tborderBottomColor: \"#ccc\"\n\n\t\t// flexDirection: \"row\",\n\t\t// alignItems: \"center\"\n\t},\n\tform2: {\n\t\tmarginTop: \"5%\",\n\t\t// flex: 1,\n\t\tflexDirection: \"row\",\n\t\twidth: \"100%\",\n\t\tjustifyContent: \"space-between\",\n\t\t// alignItems: \"center\"\n\t},\n\tpicker: {\n\t\theight: 50,\n\t\twidth: \"100%\",\n\t},\n\tcode: {\n\t\twidth: \"30%\",\n\t},\n\tphone: {\n\t\twidth: \"65%\"\n\t},\n\tdropdown: {\n\t\twidth: \"100%\"\n\t},\n\tform3: {\n\t\talignItems: \"center\",\n\t}\n})\nexport default Login\n"]},"metadata":{},"sourceType":"module"}